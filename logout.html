<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Logging Out...</title>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#171717;
  --card:#1f1f1f;
  --muted:#a8a8a8;
  --accent:#6b21a8;
  --accent-strong:#5b21b6;
  --text:#eaeaea;
  --border: rgba(255,255,255,0.04);
}
body.light{
  --bg:#f6f8fb;
  --card:#fff;
  --muted:#475569;
  --text:#0f172a;
  --border: rgba(0,0,0,0.06);
}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:var(--bg);color:var(--text);transition:background .25s,color .25s;}
body{display:flex;flex-direction:column;min-height:100vh;}
dp-topbar{display:block;position:sticky;top:0;z-index:100;}
main.wrapper{flex:1;display:flex;align-items:center;justify-content:center;padding:24px;box-sizing:border-box;}
.card{background:var(--card);border-radius:12px;padding:24px;border:1px solid var(--border);box-shadow:0 6px 18px rgba(2,6,23,0.45);max-width:480px;width:100%;text-align:center;color:var(--text);}
h1{margin:0 0 6px 0;font-size:22px;font-weight:700;}
h2{margin:0 0 16px 0;font-size:16px;color:var(--muted);}
button, .footer-btn{background:var(--accent);color:#fff;border:none;padding:12px;border-radius:8px;font-weight:700;cursor:pointer;margin-top:10px;width:100%;}
button:hover,.footer-btn:hover{opacity:.95;}
.footer{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap;justify-content:center;}
.footer-btn{background:var(--card);color:var(--text);border:1px solid var(--border);text-decoration:none;text-align:center;}
#toast{position:fixed;top:18px;left:50%;transform:translateX(-50%);padding:10px 14px;border-radius:10px;font-weight:700;display:none;z-index:99999;color:#fff;box-sizing:border-box;}
#toast.purple{background:var(--accent-strong);}
#toast.red{background:#c00;}
#toast.yellow{background:#e6b800;color:#222;}
</style>
<script type="module" src="/dp-topbar.js"></script>
</head>
<body>
<dp-topbar></dp-topbar>

<main class="wrapper">
  <div class="card" role="region" aria-label="Logout status">
    <h1 id="title">Logging you out...</h1>
    <h2 id="subtitle">Please wait while we finish up</h2>

    <div id="extraInfo" style="display:none;margin-top:12px;text-align:left;">
      <p><strong>Email:</strong> <span id="email">Fetching...</span></p>
      <p><strong>Logout Time:</strong> <span id="timestamp">Fetching...</span></p>
      <p>Close your browser if you‚Äôre on a public or shared device.</p>
    </div>

    <div class="footer" id="footerLinks" style="display:none;">
      <a href="https://darkpurpleof.github.io/login" class="footer-btn">üîë Log Back In</a>
      <a href="https://darkpurpleof.github.io" class="footer-btn">Homepage</a>
      <a href="mailto:javiercorzo387@gmail.com" class="footer-btn">‚úâÔ∏è Contact Support</a>
    </div>
  </div>
</main>

<div id="toast"></div>

<script>
function showToast(msg,color="purple",duration=3500){
  const t=document.getElementById("toast");
  t.textContent=msg;
  t.className=color+" show";
  t.style.display="block";
  setTimeout(()=>{t.className=color+" hide";setTimeout(()=>{t.style.display="none";t.className="";},400);},duration);
}

// Dark/Light toggle
const toggleBtn=document.createElement("button");
toggleBtn.textContent="üåô";
toggleBtn.style.position="absolute";
toggleBtn.style.top="10px";
toggleBtn.style.right="10px";
toggleBtn.style.fontSize="1.5em";
toggleBtn.style.background="none";
toggleBtn.style.border="none";
toggleBtn.style.cursor="pointer";
document.body.appendChild(toggleBtn);

toggleBtn.addEventListener("click",()=>{
  const isLight=document.body.classList.contains("light");
  document.body.classList.toggle("light",!isLight);
  toggleBtn.textContent=isLight?"üåô":"‚òÄÔ∏è";
  localStorage.setItem("theme",!isLight?"light":"dark");
});
if(localStorage.getItem("theme")==="light"){document.body.classList.add("light");toggleBtn.textContent="‚òÄÔ∏è";}
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

const firebaseConfig={
  apiKey:"AIzaSyCAPZF2zwU6z5rhikrIVZ4TVxf1tS5aTbA",
  authDomain:"darkpurpleof-s-website.firebaseapp.com",
  projectId:"darkpurpleof-s-website",
  storageBucket:"darkpurpleof-s-website.appspot.com",
  messagingSenderId:"520651082420",
  appId:"G-S2X2JYC8Z0"
};
const app=initializeApp(firebaseConfig);
const auth=getAuth(app);

onAuthStateChanged(auth,(user)=>{
  if(!user){
    showToast("You're not logged in","red");
    document.getElementById("title").innerHTML="Not logged in!";
    document.getElementById("subtitle").innerHTML='Please <a href="https://darkpurpleof.github.io/login" style="color:var(--accent);text-decoration:underline;">log in</a> first.';
    return;
  }

  const email=user.email;
  const now=new Date().toLocaleString();

  signOut(auth).then(()=>{
    showToast("Logged out successfully!","purple");
    document.title="Logged Out";
    document.getElementById("title").innerText="You're now logged out.";
    document.getElementById("subtitle").innerText="Session ended successfully.";
    document.getElementById("email").innerText=email;
    document.getElementById("timestamp").innerText=now;
    document.getElementById("extraInfo").style.display="block";
    document.getElementById("footerLinks").style.display="flex";
  }).catch(err=>{
    console.error("Logout error:",err);
    showToast("Failed to log out!","red");
  });
});
</script>
</body>
</html>
